<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="1" author="devennyr">
        <createTable tableName="users">
            <column name="id" type="INTEGER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="TEXT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <loadData tableName="users" file="db/changelog/data/users.csv">
            <column name="id" type="numeric"/>
            <column name="name" type="string"/>
        </loadData>
    </changeSet>

    <changeSet id="2" author="devennyr">
        <createTable tableName="problem">
            <column name="problem_id" type="INTEGER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="sample_input" type="TEXT" />
            <column name="sample_output" type="TEXT" />
        </createTable>
        <loadData tableName="problem" file="db/changelog/data/problem.csv">
            <column name="problem_id" type="numeric"/>
            <column name="name" type="string"/>
            <column name="description" type="string"/>
            <column name="sample_input" type="string"/>
            <column name="sample_output" type="string"/>
        </loadData>
    </changeSet>

    <changeSet id="3" author="flemingc">
        <createTable tableName="submission">
            <column name="submission_id" type="INTEGER">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="INTEGER">
                <constraints nullable="false" foreignKeyName="fk_submission_user"
                             references="users(id)"/>
            </column>
            <column name="problem_id" type="INTEGER">
                <constraints nullable="false" foreignKeyName="fk_submission_problem"
                             references="problem(problem_id)"/>
            </column>
            <column name="submission_outcome" type="TEXT"/>
            <column name="exec_time" type="TEXT"/>
            <column name="memory_used" type="TEXT"/>
            <column name="language" type="TEXT"/>
            <column name="code_size" type="TEXT"/>
        </createTable>
    </changeSet>


</databaseChangeLog>
